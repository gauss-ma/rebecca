<html>
<head>
        <meta charset="UTF-8">
        <title>⬖ Rebecca</title>
        <meta name="description" content="Implementación de protocolo de `Risk Based Corrective Action` (RBCA).">
 
	<!-- FONTS -->
      
	<!-- DB -->
        <script type="text/javascript" src="db/gsi.js"></script>
        <script type="text/javascript" src="db/expo_factors.json"></script>

	<!-- JS LIBS: -->
	<script type="text/javascript" src="js/jquery-3.3.1.min.js">//JQUERY</script>
	<link rel="stylesheet" type="text/css" href="js/DataTables/datatables.min.css"/>
	<script type="text/javascript" src="js/DataTables/datatables.min.js"></script>
        <script src="https://kit.fontawesome.com/32f3fc8ac1.js" crossorigin="anonymous"></script>
	<!-- CSS      -->
        <link href="css/rebecca.css" rel="stylesheet">

	<!-- SCRIPTS -->
        <script type="text/javascript" src="src/utils.js">      //Utilitarios                                 </script>
        <!-- script type="text/javascript" src="src/objetos.js"> //Objetos                                    </script -->
	<script type="text/javascript" src="src/calc_TRANS.js"> //factores de transferencia y transporte </script>
        <!-- script type="text/javascript" src="src/calc_DIFF.js">   //coefs de difussion y conveccion        </script-->
        <!-- script type="text/javascript" src="src/calc_NAF.js">    //factores de atenuacion natural         </script-->
        <!-- script type="text/javascript" src="src/calc_EXPO.js">   //factores de exposicion                 </script -->
        <script type="text/javascript" src="src/calc_RBSL.js">       //site-specific target level             </script>
        <script type="text/javascript" src="src/calc_SSTL.js">       //site-specific target level             </script>
 
        <script type="text/javascript" src="src/main.js">            //corrida de prueb                       </script>

</head>

<body>
<button id="botonSiguiente" class="siguiente" onclick="siguiente();">
  <span class="circle" aria-hidden="true">                   
    <span class="icon arrow"></span>
  </span>
  <span class="button-text">Siguiente</span>
</button>

<script>
	//Funciones para navegación
	screen_i=0
	var screens=[]
	function setScreens(tier){
		if (tier == 1){
	 		screens=["MENU-PRINCIPAL","General","Contaminantes","Fuente"];
		}
		else{
	 		screens=["MENU-PRINCIPAL","General","Mapa","Contaminantes","Fuente"];
		}
	}
	function siguiente(){
		screen_i=(screen_i+1)%screens.length;
		mostrar(screens[screen_i]);

		if (screen_i == 0 || screen_i == 1){ $("#botonSiguiente").toggle();}
	}
	function mostrar(id){
	    var screenss= document.getElementsByClassName("screen")
	    for (i = 0; i < screenss.length; i++) {
	        screenss[i].className = screenss[i].className.replace(" activo", "");
	    }
	    var screen = document.getElementById(id)
	    screen.className += " activo";
	}

</script>

<header>
</header>

<div style="position:fixed;left:40px;top:20px;z-index:1000;color:gray;" onclick="$('nav').toggle()"><i class="fas fa-2x fa-sitemap"></i></div>


<nav>
  
<h3> (DEBUG-NAV)</h3>
<ol>
  <li><button type="button" onclick="mostrar('MENU-PRINCIPAL');" >Principal   	        </button></li>
  <li><button type="button" onclick="mostrar('General');"        >General   	        </button></li>
  <br>
  <li><button type="button" onclick="mostrar('Contaminantes');"  >Contaminantes         </button><br>&darr;<br></li>
  <li><button type="button" onclick="mostrar('Fuente');"         >Fuente                </button><br>&darr;<br></li>
  <li><button type="button" onclick="mostrar('ParamsMedia');"    >Medio de transporte   </button><br>&darr;<br></li> 
  <li><button type="button" onclick="mostrar('Mapa');"           >Vias de exposición    </button></td></tr>
</ol>

<h3> Salidas </h3>
   <!-- button type="button" onclick="mostrar('');">Diagrama de flujo de exposición        </button><br><br -->
   <!-- button type="button" onclick="mostrar('');">Resumen de inputs                      </button><br><br -->
   <!-- button type="button" onclick="mostrar('');">Parámetros químicos de contaminantes   </button><br><br -->
   <!--button type="button" onclick="mostrar('');">Especif. del usuario                   </button><br><br-->
   <!--button type="button" onclick="mostrar('');">Domenico analisis                      </button><br><br-->
   <button type="button" onclick="mostrar('');">Riesgos de base                        </button><br><br>
   <button type="button" onclick="mostrar('');">Niveles de mitigación                  </button><br><br>
   <button type="button" onclick="mostrar('inputs');">Inputs </button><br><br>

</nav>


<main>


<div id="MENU-PRINCIPAL" class="screen activo">
	<h1>REBECCA</h1>

	<p>
	Medidad correctivas basadas en riesgo. 
	</p>

	<ol class="grid-container">
	  <li><a onclick="var tier=1;setScreens(tier);siguiente();">Tier 1 <br> <span> (Risk-Based Screening Levels)</span></a></li>
	  <li><a onclick="var tier=2;setScreens(tier);siguiente();">Tier 2<br><span> (Site-Specific Target Levels)</span></a></li>
	  <!-- li><a onclick="console.log('tier1');mostrar('General');">Tier 3<br><span> (Advanced Site-Specific Target Levels)</span></a></li --> 
	</ol>
</div>



<div id="General" class='screen' >
	<ol>
 <h2> Datos del proyecto </h2>  
        <li>
	  <input type="text" size="35" placeholder="NOMBRE DEL PROYECTO"  id="sitio"><br>
        </li>
        <li>
	 <input type="text" size="10" placeholder="FECHA (DD/MM/YYYY)"  id="fecha">
	</li>
	</ol>

</div>

<div class="screen">
	<h2>Target Risk	</h2>
	
		Target Risk (TR)  <input type="text" id="TR"                  placeholder="1.0e-5" size=5><br>
		Target Hazard Quotient (THQ)  <input type="text" id="THQ"     placeholder="1.0e0" size=5><br>

</div>


<div id="Contaminantes" class="screen">
 <h2> Compuestos de interés </h2>  

<div style="display:flex;flex-direction:row">
	<div class="listaCompuestos">


		<center>
		<span> <small> Seleccione los compuestos de la lista. </small> </span>

		</center>

        </div>
	<button id="cleanAll" type="button" class="boton">Borrar Selección</button>
	<div id="TablaContainer">
    		<table id="COCsTable" class="display">
    		    <thead>
    		        <tr>
    		            <th>Contaminante</th>
    		            <th>CAS</th>
    		        </tr>
    		    </thead>
    		    <!--tfoot>
    		        <tr>
    		            <th>Contaminante</th>
    		            <th>CAS</th>
    		        </tr>
    		    </tfoot-->
    		</table>
	</div>


</div>











</div>




<script>
 	// TABLAS
    $(document).ready(function() {
    MiTabla= $('#COCsTable').DataTable( {
            data: GSIdata,
            "columns": [
                { "data": "name" },
                { "data": "CAS" }
            ]
        } );

   //Cuando clickeo en una fila, se selecciona:
    MiTabla.on( 'click', 'tr', function () {
        $(this).toggleClass('selected');
	printLista();
    } );


        //Boton de borrar selección.
    $('#cleanAll').click( function () {
    	MiTabla.$('tr.selected').removeClass('selected');
        $(".listaCompuestos").empty();
    });


    function printLista(){
      	cocLista='<h3> COCs seleccionados: </h> <ol>'
      	for (i=0;i< MiTabla.rows(".selected").data().length;i++){
      		coc=MiTabla.rows(".selected").data()[i];
      		cocLista+=`<li>`+coc.name+`</li>`
      	}
      	cocLista+=`</ol>`
     	$(".listaCompuestos").empty();
      	$(".listaCompuestos").append(cocLista);
  };

});


                                                                           
</script>                                                                  

                                                                           
                                                                           





<div id="Fuente" class="screen">
 <h2> Fuente de contaminación </h2>  
 
<div id="CanvasContainer">
<canvas id="miCanvas" > </canvas>
</div>


        <script src="js/dat.gui.min.js"></script>
        <script src="js/gl-matrix-min.js"></script>
        <script src="js/three.js"></script>
        <script src="js/controls/OrbitControls.js"></script>

<script>
//DAT.GUI Parameters
	run={} 
	run.src={surf:false,soil:false,gw:false}

        s={
           surf:{
                z:0.0 ,
                DX:12. , //[m]largo
                DY:12. , //[m]ancho
                DZ:1. , //[m]espesor
                C: 0.   //[mg/m3]concentración
           },
           soil:{
                z: 3. , //[m]profundidad (desde la superficie)
                DX:12. , //[m]largo
                DY:12. , //[m]ancho
                DZ:2. , //[m]espesor
                C: 0.   //[mg/m3]
           },
           gw:{
                z :8. , //[m]profundidad (desde la superficie)
                DX:12. , //[m]largo
                DY:12. , //[m]ancho
                DZ:3. , //[m]espesor
                C: 0.   //[mg/m3]
           }
        };

	m={}            //(site-specific parameters)
            m.soil={
                h:5.0,             //   [m]     grosor total
                h_zc: 0.05,        //   [m]     grossor de zona capilar
                theta:0.38,        //   [-]     porosidad
                theta_w:0.15,      //   [-]     contenido de agua volumetrico
                theta_a:0.23,      //   [-]     contenido de aire volumetrico
                theta_a_zc:0.342,  //   [-]     contenido de aire volumetrico en zona capilar
                theta_w_zc:0.038,  //   [-]     contenido de agua volumetrico en zona capilar
                rho_s:1700,         //  [kg/m3]  densidad 
                k_s:864,           //   [cm/d]  conductividad hidraulica vertical 
                k_v:1e-12,         //   [m2]    permeabilidad de vapor 
                I:30.0,            //   [cm/yr] Infiltracion neta 
                fOC:0.01,          //   [-]     frac organica todo el perfil
                fOC_zc:0.02,       //   [-]     frac organica zona capilar
                pH:6.8             //   [-]     pH
                };
            m.gw={
                h:8.0,             //  [m]     grosor del acuifero
                k_s:2.5*1e-6,      //  [m/s]  cond hidraulica saturada
                i:1e-2,            //  [-]     gradiente hidraulico
                theta:0.38,        //  [-]     porosidad effectiva
                v:0.2,             //  [m/d]  velocidad de Darcy
                v_s:0.66,          //  [m/-]  velocidad especifica (v/theta)
                fOC:1e-3,          //  [-]     fracc organica
                pH:6.2,            //  [-]     pH
                sigma_x:40,        //   [m]     dispersividad.x
                sigma_y:10,        //  [m]     dispersividad.y
                sigma_z:0.01,      //  [m]     dispersividad.z
                Y:240,             //[m] ancho de acuifero
                Z:6,               //[m] grosor de acuifero
                };
            m.air={
                h_mix:2.0,         //   [m]     altura de zona de mezcla
                u:2.25,            //   [m/s]    velocidad del viento
                sigma_y:1.0,       //   [  ]    dispersividad
                sigma_z:1.0
                }
            m.sw={
                Q:20,           //   [m3/s]  Caudal río 
                A:10,
	}



    	// ESCENA
    	var scene = new THREE.Scene();
    	
	var canvasWidth=$("#miCanvas").innerWidth();
	var canvasHeight=$("#miCanvas").innerHeight();
    	// CAMARA
    	//var camera = new THREE.PerspectiveCamera(25, window.innerWidth/window.innerHeight, .1, 500) //params: zoom, ratioW/H, near, far
    	var camera = new THREE.PerspectiveCamera(20, canvasWidth/canvasHeight, .1, 500) //params: zoom, ratioW/H, near, far
    	camera.position.set(50,20,50);
	scene.position.y=m.soil.h
    	camera.lookAt(scene.position);
    	
    	// RENDERER
    	var renderer = new THREE.WebGLRenderer({canvas:miCanvas});
    	//renderer.setSize(window.innerWidth*0.5, window.innerHeight*0.5);
    	renderer.setSize(canvasWidth, canvasHeight);
    	renderer.setClearColor(0xf7f7f7);
    	renderer.shadowMap.enabled = true;
    	renderer.shadowMap.type = THREE.PCFSoftShadowMap;
	
	//CONTROL
	var controls = new THREE.OrbitControls( camera, renderer.domElement );


    	// EJES VECTORES
    	var axis = new THREE.AxesHelper(1);
    	scene.add(axis);
	
    	
	////// Grilla
    	//var grid = new THREE.GridHelper(10,1);
    	//scene.add(grid);
    	
    	//// Plano
    	//var planeGeo = new THREE.PlaneGeometry(12,20,20);
    	//var planeMaterial = new THREE.MeshLambertMaterial({color:0xfcf6e8});
    	//var plane = new THREE.Mesh(planeGeo,planeMaterial);
    	//plane.rotation.x = -.5*Math.PI;
    	//scene.add(plane);

	// Esfera
	//var geometry = new THREE.SphereGeometry( 10, 32, 32 );
	//var material = new THREE.MeshBasicMaterial( {color: 0xffff00} );
	//var sphere = new THREE.Mesh( geometry, material );
	//sphere.position.x=6;
	//sphere.position.y=-3;
	//sphere.position.z=7;
	//scene.add( sphere );
	
	
	//Materiales:

  	//var soilMaterial = new THREE.MeshLambertMaterial({color:0xf6ecd8,opacity:0.8,transparent:true});
  	//var gwMaterial = new THREE.MeshLambertMaterial({color:0xbbd9e3, opacity:0.8, transparent:true});
	//var srcMaterial = new THREE.MeshLambertMaterial({color:0xff3300});
	var soilMaterial = new THREE.MeshStandardMaterial({
        			color: 0xf6ecd8,
        			opacity: 0.8, 
        			transparent: true, 
        			// Quedan feos... pero para un mat "realista", se deberían usar varios mapas.
        			map: new THREE.TextureLoader().load('texture/Dirt_005_COLOR.jpeg'),
        			normalMap: new THREE.TextureLoader().load('texture/Dirt_005_NORM.jpg'),
        			roughnessMap: new THREE.TextureLoader().load('texture/Ground_Dirt_005_ROUGH.jpg'),
        			displacementMap: new THREE.TextureLoader().load('texture/Ground_Dirt_005_DISP.png'),
        			aoMap: new THREE.TextureLoader().load('texture/Ground_Dirt_005_OCC.jpg'),
        		});
        var gwMaterial = new THREE.MeshPhongMaterial({ color: 0xbbd9e3, 
        	specular: 0xfffffff, 
        	opacity: 0.8, 
        	transparent: true, 
        	map: new THREE.TextureLoader().load('texture/Draw_water.png'),
        	// normalMap: new THREE.TextureLoader().load('texture/Water-normal.jpg'),
        
        
        });
        
        var srcMaterial = new THREE.MeshLambertMaterial({ color: 0xff3300 });

        var pozo1Material = new THREE.MeshLambertMaterial({ color: 0xffffff });
        var pozo2Material = new THREE.MeshLambertMaterial({ color: 0xbbd9e3 });
	
	var linea = new THREE.LineBasicMaterial( { color: 0x202020 } ) 
	
	//Objetos:

  	//SUELO
  	var sueloGeo = new THREE.BoxGeometry(12,m.soil.h,20);
  	var suelo = new THREE.Mesh(sueloGeo, soilMaterial);
	var sueloEdges = new THREE.EdgesGeometry( sueloGeo );
	var sueloLine = new THREE.LineSegments( sueloEdges, linea);
	var SUELO = new THREE.Group();
	SUELO.add( suelo );
	SUELO.add( sueloLine );
	scene.add( SUELO );
  	SUELO.position.set(0,-suelo.geometry.parameters.height*0.5,0);


	//GROUNDWATER
  	var groundwaterGeo = new THREE.BoxGeometry(12,m.gw.h,20);
  	var groundwater = new THREE.Mesh(groundwaterGeo,gwMaterial);
	var groundwaterEdges = new THREE.EdgesGeometry( groundwaterGeo );
        var groundwaterLine = new THREE.LineSegments( groundwaterEdges, linea);
        var GROUNDWATER = new THREE.Group();
        GROUNDWATER.add( groundwater );
        GROUNDWATER.add( groundwaterLine );
        scene.add( GROUNDWATER );
  	GROUNDWATER.position.set(0,-groundwater.geometry.parameters.height-groundwater.geometry.parameters.height*0.5,0);

	// SRC ss
		var surfGeo = new THREE.BoxGeometry(1,1,1);
		var surf = new THREE.Mesh(surfGeo,srcMaterial);
		surf.position.set(0,-s.surf.DZ*0.5,0);
		scene.add(surf);
	
	// SRC soil
		var soilGeo = new THREE.BoxGeometry(1,1,1);
		var soil = new THREE.Mesh(soilGeo,srcMaterial);
		soil.position.set(0,-s.soil.z - s.soil.DZ*0.5,0);
		scene.add(soil);

	// SRC gw
		var gwGeo = new THREE.BoxGeometry(1,1,1);
		var gw = new THREE.Mesh(gwGeo,srcMaterial);
		gw.position.set(0, - s.gw.z - s.gw.DZ *0.5,0);
		scene.add(gw);


	//POZO
		var pozoGeo0 = new THREE.BoxGeometry(0.6,0.4,0.6);
		var pozoGeo1 = new THREE.CylinderGeometry( .15, .13, m.soil.h*1.1, 10 );
		var pozoGeo2 = new THREE.CylinderGeometry( .13, .12, m.soil.h*0.5, 10 );
        	var POZO = new THREE.Group();
		var pozo0 = new THREE.Mesh( pozoGeo0, pozo1Material );
		var pozo1 = new THREE.Mesh( pozoGeo1, pozo1Material );
		var pozo2 = new THREE.Mesh( pozoGeo2, pozo2Material );
		pozo0.position.set(0,0,suelo.geometry.parameters.depth*0.5);
		pozo1.position.set(0,-pozo1.geometry.parameters.height*0.4,suelo.geometry.parameters.depth*0.5);
		pozo2.position.set(pozo1.position.x,pozo1.position.y-pozo1.geometry.parameters.height*0.5-pozo2.geometry.parameters.height*0.5,pozo1.position.z);
		POZO.add(pozo0);
		POZO.add(pozo1);
		POZO.add(pozo2);
		scene.add( POZO );

    	// Luces
    	var spotLight = new THREE.SpotLight(0xffffff);
    	spotLight.position.set(15,30,50);
    	spotLight.castShadow = true;
    	scene.add(spotLight);
	var light = new THREE.AmbientLight( 0x606060 ); // soft white light
	scene.add( light );



    	// Agregar a canvas
    	//document.body.appendChild( renderer.domElement );
    	// Renderizar
    	renderer.render(scene,camera);
                        
	
	function animate() {


		surf.visible= run.src.surf;
		soil.visible= run.src.soil;
		  gw.visible= run.src.gw;
	//x
	surf.scale.x=s.surf.DY/surf.geometry.parameters.depth
	soil.scale.x=s.soil.DY/soil.geometry.parameters.depth
	gw.scale.x=s.gw.DY/  gw.geometry.parameters.depth
	//y
	surf.scale.y=s.surf.DZ/surf.geometry.parameters.height
	soil.scale.y=s.soil.DZ/soil.geometry.parameters.height
	gw.scale.y=s.gw.DZ/  gw.geometry.parameters.height
	
	SUELO.scale.y=m.soil.h/suelo.geometry.parameters.height
	GROUNDWATER.scale.y=m.gw.h/groundwater.geometry.parameters.height


	//z
	surf.scale.z=s.surf.DX/surf.geometry.parameters.width
	soil.scale.z=s.soil.DX/soil.geometry.parameters.width
	gw.scale.z=s.gw.DX/  gw.geometry.parameters.width


	//z-position
	surf.position.y=0-surf.geometry.parameters.height*s.surf.DZ/surf.geometry.parameters.height*0.5
	soil.position.y=-s.soil.z - s.soil.DZ/soil.geometry.parameters.height*0.5
	gw.position.y=-s.gw.z - s.gw.DZ/gw.geometry.parameters.height*0.5

	SUELO.position.y=0-suelo.geometry.parameters.height*m.soil.h/suelo.geometry.parameters.height*0.5
	GROUNDWATER.position.y=-m.soil.h-groundwater.geometry.parameters.height*m.gw.h/groundwater.geometry.parameters.height*0.5

	requestAnimationFrame( animate );
	     // required if controls.enableDamping or controls.autoRotate are set to true
	     controls.update();
	     renderer.render( scene, camera );

		  
    		  
    	}


// DAT.GUI Related Stuff
       
       




//Medio:
gui= new dat.GUI({ autoPlace: false });
gui.domElement.id = "gui";
$("#CanvasContainer").append(gui.domElement);


	var gui_profile = gui.addFolder('Perfil');
	gui_profile.add(m.soil,"h",  0, 10).name("h<sub>suelo</sub>");//.listen();
	gui_profile.add(m.soil,"h_zc",  0, 10).name("h<sub>cap</sub>");//.listen();
	gui_profile.add(m.gw,"h",  0, 10).name("h<sub>gw</sub>");//.listen();


//Fuentes:
	var gui_src = gui.addFolder('Fuentes');
	

	gui_src.add(run.src,"surf").name("Superficial");
	  a= gui_src.add(s.surf,"DX", 0, 10);
	  b= gui_src.add(s.surf,"DY", 0, 10);
	  c= gui_src.add(s.surf,"DZ", 0, 5) ;

	gui_src.add(run.src,"soil").name("Suelo");
	   gui_src.add(s.soil,"z", 0, m.soil.h - s.soil.DZ).listen();
	   gui_src.add(s.soil,"DX",0, 10);
	   gui_src.add(s.soil,"DY",0, 10);
	   gui_src.add(s.soil,"DZ", 0, 5);

	gui_src.add(run.src,"gw").name("Aguas subterraneas");
	   gui_src.add(s.gw,"z",m.soil.h , m.soil.h + m.gw.h - s.gw.DZ).listen();
	   gui_src.add(s.gw,"DX",0, 10);
	   gui_src.add(s.gw,"DY",0, 10);
	   gui_src.add(s.gw,"DZ",0, 5) ;

//// Definición de pathways:
//var gui_pathways = new dat.GUI({ autoPlace: false });
//gui.domElement.id = "gui";
//$("#Fuente").append(gui.domElement);
//
//	var gui_suelo = gui.addFolder('Suelo');
//	gui_gw.add(s.gw,"C", 0, 1).listen();
//
//
//<input type="checkbox" name="soil_veg_ingestion">Cultivo     
//<input type="checkbox" name="soil_ingestion"    >Ingesta directa
//<input type="checkbox" name="soil_dermal"       >Contacto dérmico 
//<input type="checkbox" name="soil_inhalation"   >Inhalación
//<input type="checkbox" name="gw_ingestion">Pozos para consumo humano     
//<!--input type="checkbox" id="soil.to_gw" onclick="receptor.gw.lixiviados_desde_soil=true;" >Lixiviados desde suelos afectados<br-->
//<input type="checkbox" name="sw_swimming"        >Recreación
//<input type="checkbox" name="sw_fish_consumption">Consumo de peces 
//<input type="checkbox" name="sw_ingestion"       >Consumo de agua  <br>

animate();




//window.addEventListener( 'resize', onWindowResize, false );
//
//function onWindowResize(){
//
//    camera.aspect = window.innerWidth / window.innerHeight;
//    camera.updateProjectionMatrix();
//
//    renderer.setSize( window.innerWidth*0.5, window.innerHeight*0.5 );
//
//}
</script>


                                
</div>








<div id="Mapa" class="screen">

   	<h2> 0.Ubicación de receptores</h2>

<table>
<tr><td></td>
  <td> Latitud:</td>
  <td> Longitud:</td>
  <td> Distancia:</td>
  <td> Tipo</td>
</tr>
    <tr>
     <th style="color:red;">Emisor  </th>
     <td><input type="text" placeholder="-" id="emis_lat">  </td>
     <td><input type="text" placeholder="-" id="emis_lon">  </td>
     <td><input type="text" placeholder="-" id="emis_dist">  </td>
     <td><select id="emis_type">                        
           <option value="residencial">Residencial </option>
           <option value="comercial">  Comercial   </option>
           <option value="rural">      Rural       </option>
           <option value="otro">       Otro        </option>
         </select>      	
     </td>
    <td><a onclick="setEmisor()"><i style="color:red;" class="fas fa-map-marked-alt"></i> </a></td>
    </tr>
<tr>
 <th style="color:blue">Receptor</th>
 <td><input type="text" placeholder="-" id="recep_lat">  </td>
 <td><input type="text" placeholder="-" id="recep_lon">  </td>
 <td><input type="text" placeholder="-" id="recep_dist">  </td>
 <td><select id="recep_type">                        
       <option value="residencial">Residencial </option>
       <option value="comercial">  Comercial   </option>
       <option value="rural">      Rural       </option>
       <option value="otro">       Otro        </option>
     </select>      	
 </td>
<td><a onclick="setReceptor()"><i style="color:blue;" class="fas fa-map-marked-alt"></i> </a></td>
</tr>
</table>   

        
<div id="googleMap" style="width:90%;height:60%;padding-right:20px;"></div>

<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBvQnNjZRfMKHEaBnwk5riXs5wTJUG7vIs&callback=myMap&sensor=false&v=3&libraries=geometry"></script>
<script>
//function myMap() {
//var mapProp= {
//  center: new google.maps.LatLng(-34.6247472,-58.4490894),
//  zoom:6,
//};
//var map = new google.maps.Map(document.getElementById("googleMap"),mapProp);
//}
var map;
var myCenter = new google.maps.LatLng(-34.6247472,-58.4490894);
var emisor;
var receptor;
var infowindow;

function initialize() {
  var mapProp = {
    center: myCenter,
    zoom: 5,
    //mapTypeId: google.maps.MapTypeId.ROADMAP
  };

  map = new google.maps.Map(document.getElementById("googleMap"), mapProp);
}

function setEmisor(){
	//google.maps.event.addListener(map, 'click', function(event) {
	var MarkerListener=google.maps.event.addListener(map, 'click', function(event) {
	
	var ubicacion=event.latLng;

  	if (!emisor || !emisor.setPosition) {
  	  emisor = new google.maps.Marker({
  	  position: ubicacion,
  	  map: map,
  	  icon: {
  	    url: "http://maps.google.com/mapfiles/ms/icons/red-dot.png"
  	  }
  	});
  	} 
  	else { emisor.setPosition(ubicacion);
  	}
  	console.log("Emisor");
  	$("#emis_lat").val(emisor.position.lat());
  	$("#emis_lon").val(emisor.position.lng());
  	$("#emis_dist").val(0);

	google.maps.event.removeListener(MarkerListener);

	});
};

function setReceptor(){
	//google.maps.event.addListener(map, 'click', function(event) {
	var MarkerListener=google.maps.event.addListener(map, 'click', function(event) {
	  var ubicacion=event.latLng;


	  if (!receptor || ! receptor.setPosition) {
	    receptor = new google.maps.Marker({
	    position: ubicacion,
	    map: map,
	    icon: {
	      url: "http://maps.google.com/mapfiles/ms/icons/blue-dot.png"
	    }
	  });
	  } 
	  else { receptor.setPosition(ubicacion)}
  	  console.log("Receptor");
	  $("#recep_lat").val(receptor.position.lat());
	  $("#recep_lon").val(receptor.position.lng());
	  //$("#recep_dist").val(google.maps.geometry.spherical.computeDistanceBetween (emisor,receptor));
	
	$("#recep_dist").val(Math.round(google.maps.geometry.spherical.computeDistanceBetween (emisor.position, receptor.position)/1000.));

	google.maps.event.removeListener(MarkerListener);
	});
};

google.maps.event.addDomListener(window, 'load', initialize);

</script>

   </div>




   	                                                                                                          
   
   
   
   
   
   
   
   
   


<div id="ParamsMedia" class="screen">
   	<h2>1. Edafología</h2>                                                                                                            	
 			Prof. a zona saturada (h<sub>sat.</sub>)  <input type="text"  id="soil_h"       placeholder="3.0"  size=5> (m)    <br>
 			Grosor de zona capilar (h<sub>cap.</sub>) <input type="text"  id="soil_h_zc"    placeholder="0.1"  size=5> (m)    <br>
 			Densidad efectiva (&rho;<sub>s</sub>)     <input type="text"  id="soil_rho"     placeholder="1.7"  size=5> (kg/L) <br>
 			Porosidad total (&theta;)                 <input type="text"  id="soil_theta"   placeholder="0.3"  size=5>        <br>
 			Fracción de agua (&theta;<sub>w</sub>)    <input type="text"  id="soil_theta_w" placeholder="0.1"  size=5>        <br>
 			Fracción de aire (&theta;<sub>a</sub>)    <input type="text"  id="soil_theta_a" placeholder="0.2"  size=5>        <br>
 			Conductividad hidráulica (k<sub>s</sub>)  <input type="text"  id="soil_ks"      placeholder="25.0" size=5>(cm/día)<br>
 			<!-- Permeabilidad a vapor                     <input type="text" id="soil_kv" placeholder="0" size=5> (m2)     <br -->
 			
 			<h3> Infiltración </h3>
 			Estimación de infiltración                <input type="text"  id="soil_I"        placeholder="0" size=5> (cm/año)     <br>
 			
 			<h3> Parámetros de partición </h3> 
 			Fracc. organica en superficie (f<sub>oc</sub>)<input type="text" id="soil_fracOC" placeholder="0.1"  size=5><br>
 			Fracc. organica promedio (todo el perfil)     <input type="text" id="soil_fracOC" placeholder="0.02" size=5><br>
 			pH                                            <input type="text" id="soil_pH"     placeholder="6.5"  size=5><br>

        <h2>2a. Hidrogeología </h2> 
		Velocidad de Darcy (U)                   <input type="text" id="gw_v"     placeholder="0" size=5> (cm/día) <br>
		Velocidad especifica (u)                 <input type="text" id="gw_v_s"   placeholder="0" size=5> (cm/día) <br>
		Conductividad hidráulica (k<sub>s</sub>) <input type="text" id="gw_k_s"   placeholder="0" size=5>  	   <br>
		Gradiente hidráulico (&Delta;h/&Delta;x) <input type="text" id="gw_i"     placeholder="0" size=5>  	   <br>
		Porosidad efectiva (&theta;)             <input type="text" id="gw_theta" placeholder="0" size=5>  	   <br>
		Grosor del acuífero (h)                  <input type="text" id="gw_h"     placeholder="0" size=5> (m)      <br>
	<h2>2b. Descarga a aguas superficiales </h2>                  
		Caudal 					 <input type="text" id="sw_Q"     placeholder="0" size=5> (m3/s)   <br>


   	<h2>4. Meteorología </h2>
   	                                                                                                                                  
   	    	Velocidad del viento (u)                       <input type="text" id="air_u"       placeholder="0" size=5> (m/s) <br>
   	    	Altura de capa de mezcla (h<sub>mix.</sub>)    <input type="text" id="air_h_mix"   placeholder="0" size=5> (m) <br>
   	    	Mezclado turbulento      (&sigma;<sub>z</sub>) <input type="text" id="air_sigma_z" placeholder="0" size=5><br>
   	                                                                                                                                  
   	                                                                                                                                  
   	<h2>3. Material Particulado </h2>
   	    	Área expuesta:           <input type="text" id="" placeholder="0" size=5> <br>
   	    	Cobertura vegetal:       <input type="text" id="" placeholder="0" size=5> <br>
   	    	Velocidad de fricción:   <input type="text" id="" placeholder="0" size=5> <br>

</div>


















<div id="inputs" class="screen">
<h2> Parametros de exposición:</h2>

	<table>
<tr class="AT">	<td>Tiempo de exposición        		</td><td>AT<sub> </sub>   </td><td>(años)</td>     			</tr>
<tr class="ATc"><td>Tiempo de exposición (cancerigenos)   </td><td>AT<sub>c</sub>   </td><td>(años)</td>     			</tr>
<tr class="BW">	<td>Peso corporal			        </td><td>BW<sub> </sub>   </td><td>(kg)</td>       			</tr>
<tr class="ED">	<td>Duración de exposición		</td><td>ED<sub>c</sub>   </td><td>(años)</td>     			</tr>
<tr class="EF">	<td>Frecuencia de exposición		</td><td>EF<sub>c</sub>   </td><td>(dia/año)</td>  			</tr>
<tr class="IRw"><td>Tasa de ingesta de agua		</td><td>IR<sub>w</sub>   </td><td>(L/día)</td>    			</tr>
<tr class="IRs"><td>Tasa de ingesta de suelo		</td><td>IR<sub>s</sub>   </td><td>(kg/día)</td>   			</tr>
<tr class="SA">	<td>Superficie dermica expuesta	        </td><td>SA<sub> </sub>   </td><td>(m2)</td>       			</tr>
<tr class="M">	<td>Factor de adherencia piel-suelo       </td><td>M <sub> </sub>   </td><td>(-)</td>        	                </tr>
	</table>

<script>
	
function mostrarExpoParams(){
		$("tr[class=AT]").append("<td>"+r.AT+"</td")
		$("tr[class=ATc]").append("<td>"+r.ATc+"</td")
		$("tr[class=BW]").append("<td>"+r.BW+"</td")
		$("tr[class=ED]").append("<td>"+r.ED+"</td")
		$("tr[class=EF]").append("<td>"+r.EF+"</td")
		$("tr[class=IRw]").append("<td>"+r.IRw+"</td")
		$("tr[class=IRs]").append("<td>"+r.IRs+"</td")
		$("tr[class=SA]").append("<td>"+r.SA+"</td")
		$("tr[class=M]").append("<td>"+r.M+"</td")
}
</script>




























</main>



<footer class="site-footer" style="display:flex-inline; padding:60px;">
    <div class="container">
      <div class="row">

<div class="articulo" style="width:90%;padding-bottom:30px">
<h6 style=""> Sobre REBECCA</h6>
<div class="about-half">

        <p><a href="#">REBECCA</a> tiene una naturaleza dual. </p>
        <p>Acá se podría poner un texto sobre el proyecto, alcances, contriubudores, y esas cosas.
        Al mismo tiempo, the font features friendly and open curves.
        Tiro una idea alocada, pero me gusta esto de describir el producto como si fuese una obra de arte, con su propia personalidad, historia, y no tan fríamente.
        This makes for a more natural reading rhythm more commonly found in humanist and serif types.
        </p>
        <p>
        </p>
        <p>
        </p>
        </div>
        </div>

      <hr>
    </div>
    <div class="container">
      <div class="row">
        <div>
        <p>REBECCA es un proyecto de software <a href="#">libre</a> y <a href="#">gratuito</a> desarrollado por <a>gauss-ma</a>.</p>
        <p>Para contribuir, ver <a href="https://github.com/gauss-ma/rebecca/">github.com/gauss-ma/rebecca</a></p>
        </div>
        <a class="github" href="#"><i class="fa fa-4x fa-github"></i></a>
      </div>
    </div>
 </footer>


</body>









<script>

    //SISTEMA DE VENTANAS ON/OFF
    
    
    
    
    
    
    
    


    
    //VARIABLES DE CORRIDA
    //var run = {};
    //var receptor={};
    //var transport={};

    ////EXTRAER INPUTS

    //function getInputValues(){
    //    $.each($('form.run').serializeArray(), function(i, field) {
    //        run[field.name] = field.value;
    //    });
    //    console.log(run);

    //    $.each($('form.pathways').serializeArray(), function(i, field) {
    //        receptor[field.name] = field.value;
    //    });
    //    console.log(receptor);
    //}


	//Actualizar variables
   //function listen(){
   // 	if ( $('input:checkbox[name=decaimiento_on]').prop('checked') ){
   // 		$('input:text[name=tiempo]').prop('disabled', false);
   // 		console.log("hola");
   // 	}else{
   // 		$('input:text[name=tiempo]').prop('disabled', true);
   // 		console.log("chau");
   // 	};
   // 
   // };




















</script>






</html>



















<!-- div id="TransportModels" class="screen">
<h1> Transport Model Options</h1>
  <div class="izq">
 


        <h2> 1. Transporte en Suelo</h2>
	  <b title="Factor de volatilización en ambientes abiertos"> FV<sub>a</sub></b>
   	    <input type="radio" name="vfsamb" value="false" checked>Calcular
   	    <input type="radio" name="vfsamb" value="true">FVa =   <input type="text" id="vfsamb" placeholder="0" size=5><br>
   	     
	  <b title="Factor de volatilización en ambientes cerrados"> FV<sub>c</sub></b>
            <input type="radio" name="vfsesp" value="false" checked>Calcular    
            <input type="radio" name="vfsesp" value="true">FVc =   <input type="text" id="vfsesp" placeholder="0" size=5><br>

	  <b title="Factor de lixiviación a aguas subterraneas"> FL</b>
            <input type="radio" name="lf" value="false" checked>Calcular    
            <input type="radio" name="lf" value="true">FL =        <input type="text" id="lf" placeholder="0" size=5><br>
  
  
        <h2> 2. Transporte en Aguas subterraneas</h2>
            <b title="Factor de volatilización desde acuíferos a ambientes abiertos"> FV<sub>aa</sub></b>
              <input type="radio" name="vfwamb" value="false" checked>Calcular    
              <input type="radio" name="vfwamb" value="true">FVa =   <input type="text" id="vfwamb" placeholder="0" size=5><br>
               
            <b title="Factor de volatilización de acuífero a ambientes cerrados"> FV<sub>ac</sub></b>
              <input type="radio" name="vfwesp" value="false" checked>Calcular    
              <input type="radio" name="vfwesp" value="true">FVc =        <input type="text" id="vfwesp" placeholder="0" size=5><br>

            <b title="Factor de Dilución/Atenuación"> FDA </b>
   	    <input type="radio" name="daf" value="false" checked>Calcular
            <input type="radio" name="daf" value="true">FDA =              <input type="text" id="daf" placeholder="0" size=5><br>
 
	    <h3> Aguas superficiales </h3>
            <b title="Factor de Dilución de Aguas subterráneas en Aguas Superficiales"> FD<sub>gwsw</sub> </b>
            <input type="radio" name="dfgwsw" value="false" checked>Calcular
	    <input type="radio" name="dfgwsw" value="true">FDgwsw =  <input type="text" id="dfgwsw" placeholder="0" size=5><br>
 
     </div>
      <div class="der">


        <h2> 3. Transporte en Aire</h2>
            <b title="Factor de volatilización desde la superficie del suelo"> FV<sub>ss</sub> </b>
              <input type="radio" name="vfss" value="false" checked>Calcular
              <input type="radio" name="vfss" value="true">FVss = <input type="text"  id="vfss" placeholder="0" size=5><br>
 
           <b title="Factor de emisión de material particulado"> FEP</b>
              <input type="radio" name="pef" value="false" checked>Calcular
	      <input type="radio" name="pef" value="true">FEP =   <input type="text"  id="pef" placeholder="0" size=5><br>

	   <b title="Factor de Dispersión en el aire"> FDA </b>
   	   <input type="radio" name="adf" value="false" checked> Calcular
           <input type="radio" name="adf" value="true"          > FDA =       <input type="text" id="adf" placeholder="0" size=5><br>


	<h2> 4. Decaimiento        </h2>
	    <b> Tasa de decaimiento (&lambda;)</b> <br>
            <input type="checkbox" name="lambda_s"> suelo (&lambda;<sub>s</sub>)<input type="text" id="lambda_s" placeholder="0" size=5>&nbsp;<br>
            <input type="checkbox" name="lambda_w"> agua (&lambda;<sub>w</sub>) <input type="text" id="lambda_w" placeholder="0" size=5>&nbsp;<br>
            <input type="checkbox" name="lambda_a"> aire (&lambda;<sub>a</sub>) <input type="text" id="lambda_a" placeholder="0" size=5>&nbsp;<br>

  </div>
</div -->
